<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A Package of Miscellaneous Functions for Analytics and Probability • jamesmisc</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A Package of Miscellaneous Functions for Analytics and Probability">
<meta name="description" content="Miscellaneous functions: binomial_dist for visualizing the distribution of a binomial random variable (helpful for probability questions). Also, a simple function for removing pure-NA columns in a tibble. A function for plotting proportions with CI's, stratified by another categorical variable. Another for returning the results of three methods for assessing normality. Another for calculating taxes using gross income. Some compound interest functions. A function for plotting odds ratios and CI.">
<meta property="og:description" content="Miscellaneous functions: binomial_dist for visualizing the distribution of a binomial random variable (helpful for probability questions). Also, a simple function for removing pure-NA columns in a tibble. A function for plotting proportions with CI's, stratified by another categorical variable. Another for returning the results of three methods for assessing normality. Another for calculating taxes using gross income. Some compound interest functions. A function for plotting odds ratios and CI.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">jamesmisc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="miscellaneous-functions">Miscellaneous Functions<a class="anchor" aria-label="anchor" href="#miscellaneous-functions"></a>
</h1></div>
<p>Welcome friends! This is the homepage for my R package of a handful of miscellaneous functions.</p>
<p>Hopefully some of these functions will be useful to you as well.</p>
<p>It includes <code>annuity_n_rates()</code>, which can calculate and display growth curves of an investment (say, a retirement plan), with fixed annual contributions, at different annual rates of growth:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">jamesmisc</span><span class="op">)</span></span>
<span></span>
<span><span class="va">list_data_and_plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/annuity_n_returns.html">annuity_n_returns</a></span><span class="op">(</span></span>
<span>  initial_investment <span class="op">=</span> <span class="fl">20000</span>, <span class="co"># The initial investment</span></span>
<span>  annuity <span class="op">=</span> <span class="fl">10000</span>,            <span class="co"># The annual contribution, starting the year after the initial investment</span></span>
<span>  years <span class="op">=</span> <span class="fl">30</span>,                 <span class="co"># The time over which the investment grows</span></span>
<span>  return_rates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.06</span>,<span class="fl">.07</span>,<span class="fl">.08</span>,<span class="fl">.09</span>,<span class="fl">.1</span><span class="op">)</span> <span class="co"># The annual return rates to visually compare (.06 = 6% annual return)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Unfortunately, the plot output isn’t visible here on the README, but it is visible in the function reference page!</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">list_data_and_plot</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<p><img src="README_files/figure-commonmark/unnamed-chunk-2-1.png"></p>
<p>It includes <code><a href="reference/binomial_dist.html">binomial_dist()</a></code> if you want to compute and visualize the probability of any event in a binomial experiment. For example,</p>
<p>If I apply to 8 schools, each with an acceptance rate of 20%, what is the probability that I get into at least one of them?</p>
<p>(As above, the plot output isn’t visible here on the README, but it is visible in the function reference page!)</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 8 schools; 20% chance of success (acceptance) for each; at least one acceptance means include the possibility of 1 success and every possibility of a higher number of successes, up to 8 (so)</span></span>
<span><span class="fu"><a href="reference/binomial_dist.html">binomial_dist</a></span><span class="op">(</span></span>
<span>  n_trials <span class="op">=</span> <span class="fl">8</span>,            <span class="co"># 8 is the number of "trials" in the binomial experiment</span></span>
<span>  prob <span class="op">=</span> <span class="fl">.20</span>,              <span class="co"># 20% is the chance of success for each trial</span></span>
<span>  tail_cutoff <span class="op">=</span> <span class="fl">1</span>,         <span class="co"># 1 success is where the tail/portion of the distribution representing the 'event' stops</span></span>
<span>  left_or_right <span class="op">=</span> <span class="st">"right"</span>  <span class="co"># It's the right tail/portion of the distribution (every possibility &gt;= 1 success)</span></span>
<span><span class="op">)</span> </span></code></pre></div>
<p><img src="README_files/figure-commonmark/unnamed-chunk-3-1.png"></p>
<p>Or,</p>
<p>55 people received a particular surgery and were followed up to see if they later regretted it. Zero regretted it. If you were expecting 5% of them to regret it, under that assumption what was the probability that no more than zero would end up regretting it?</p>
<p>(Also, not visible here on the README, but the plot is visible in the function reference page.)</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 55 people get the surgery; it was expected beforehand that 5% would regret the surgery; zero people actually ended up regretting it; zero "or less" is the tail/portion of the binomial distribution that we're interested in, then--so, the left tail.</span></span>
<span><span class="fu"><a href="reference/binomial_dist.html">binomial_dist</a></span><span class="op">(</span><span class="fl">55</span>,<span class="fl">.05</span>,<span class="fl">0</span>,<span class="st">"left"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-commonmark/unnamed-chunk-4-1.png"></p>
<p>It includes <code><a href="reference/check_normality.html">check_normality()</a></code> if you want to quickly assess normality of a variable with a qq-plot, a Shapiro-Wilk test of normality, and also visualize the distribution of the variable in a histogram with a normal curve super-imposed:</p>
<p>(Plots are visible on the corresponding function reference page.)</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Assess whether chicken weight, in the ChickWeight dataset, is approximately normally distributed</span></span>
<span><span class="fu"><a href="reference/check_normality.html">check_normality</a></span><span class="op">(</span><span class="va">ChickWeight</span>,<span class="st">"weight"</span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-commonmark/unnamed-chunk-5-1.png"></p>
<p><img src="README_files/figure-commonmark/unnamed-chunk-5-2.png"></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>    Shapiro<span class="sc">-</span>Wilk normality test</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>data<span class="sc">:</span>  myvar</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>W <span class="ot">=</span> <span class="fl">0.90866</span>, p<span class="sc">-</span>value <span class="sc">&lt;</span> <span class="fl">2.2e-16</span></span></code></pre></div>
<p>There is also <code><a href="reference/plot_logistic_results.html">plot_logistic_results()</a></code> for plotting the adjusted odds ratios and 95% CI from a multivariable logistic regression analysis:</p>
<p>(Plot can be viewed on the function reference page.)</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>Attaching package<span class="sc">:</span> <span class="st">'dplyr'</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>The following objects are masked from <span class="st">'package:stats'</span><span class="sc">:</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    filter, lag</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>The following objects are masked from <span class="st">'package:base'</span><span class="sc">:</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>    intersect, setdiff, setequal, union</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Let's model survival in the Titanic disaster by regressing it on sex, age group (child/adult), and class. </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"Titanic"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">titanic_tbl</span> <span class="op">&lt;-</span> <span class="va">Titanic</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/as_tibble.html" class="external-link">as_tibble</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/uncount.html" class="external-link">uncount</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    Survived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Survived</span>,levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Yes"</span>,<span class="st">"No"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    Survived <span class="op">=</span> <span class="va">Survived</span> <span class="op">-</span> <span class="fl">1</span>,</span>
<span>    Survived <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">Survived</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">titanic_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span></span>
<span>  <span class="va">Survived</span> <span class="op">~</span> <span class="va">Sex</span> <span class="op">+</span> <span class="va">Age</span> <span class="op">+</span> <span class="va">Class</span>,</span>
<span>  data <span class="op">=</span> <span class="va">titanic_tbl</span>,</span>
<span>  family <span class="op">=</span> <span class="va">binomial</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize the adjusted odds ratios and 95% confidence intervals in a dot-whisker plot</span></span>
<span><span class="fu"><a href="reference/plot_logistic_results.html">plot_logistic_results</a></span><span class="op">(</span></span>
<span>  <span class="va">titanic_fit</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">"Relative odds of not surviving the Titanic (compared to reference group)"</span>,</span>
<span>  log_scale <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># The default is TRUE (set the x axis to a log scale rather than linear scale)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>Scale <span class="cf">for</span> x is already present.</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>Adding another scale <span class="cf">for</span> x, which will replace the existing scale.</span></code></pre></div>
<p><img src="README_files/figure-commonmark/unnamed-chunk-6-1.png"></p>
<p>There’s <code><a href="reference/strat_proportion_plot.html">strat_proportion_plot()</a></code>, which is for plotting the counts and percentages of a categorical variable stratified by another categorical variable, in a dataset:</p>
<p>(Plot can be viewed on the function reference page.)</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualize counts and percentages of the engines with different numbers of cylinders, stratified by transmission</span></span>
<span><span class="fu"><a href="reference/strat_proportion_plot.html">strat_proportion_plot</a></span><span class="op">(</span></span>
<span>  data    <span class="op">=</span> <span class="va">mtcars</span>, <span class="co"># Your dataset</span></span>
<span>  row_var <span class="op">=</span> <span class="va">cyl</span>,    <span class="co"># The 'row' variable in your dataset: In this case, number of cylinders (4, 6, or 8)</span></span>
<span>  col_var <span class="op">=</span> <span class="va">am</span>,     <span class="co"># The 'column' variable in your dataset: In this case, transmission type (stick or automatic - 1 or 0)</span></span>
<span>  x_label <span class="op">=</span> <span class="st">"Cylinder"</span>,</span>
<span>  plot_title <span class="op">=</span> <span class="st">"Number of cylinders (count, %), stratified by transmission type"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="README_files/figure-commonmark/unnamed-chunk-7-1.png"></p>
<p>And there’s a function, <code><a href="reference/taxes.html">taxes()</a></code>, for getting a sense of what your net income should be, given a gross income. It calculates your federal and state taxes if you live in California or Oklahoma. And only for married filing jointly. Sorry, that’s all I have for now.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/taxes.html">taxes</a></span><span class="op">(</span></span>
<span>  <span class="fl">80000</span>,            <span class="co"># e.g., $80,000 gross income</span></span>
<span>  state_name <span class="op">=</span> <span class="st">"OK"</span> <span class="co"># Can switch to 'CA' for California</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>Rows<span class="sc">:</span> <span class="dv">1</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>Columns<span class="sc">:</span> <span class="dv">10</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a><span class="sc">$</span> Gross_Income       <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="dv">80000</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="sc">$</span> Tax_Filing         <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"Married"</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="sc">$</span> Fed_Top_Marginal   <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"0.12, 19901, 0.751"</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a><span class="sc">$</span> State_Top_Marginal <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"0.0525, 15001, 0.812"</span></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="sc">$</span> Fed_Taxes          <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">9201.88</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="sc">$</span> State_Taxes        <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">3807.297</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="sc">$</span> SocialSec_Medicare <span class="sc">&lt;</span>chr<span class="sc">&gt;</span> <span class="st">"4960, 1160"</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="sc">$</span> Prop_Taken         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">0.2391147</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="sc">$</span> Net_Income         <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">60870.82</span></span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="sc">$</span> If_No_State_Tax    <span class="sc">&lt;</span>dbl<span class="sc">&gt;</span> <span class="fl">64678.12</span></span></code></pre></div>
<p>And there are other dinky little functions as well. Enjoy!</p>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing jamesmisc</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>James Cutler <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by James Cutler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
